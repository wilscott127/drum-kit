<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/ðŸ”¥" />
  <!-- Travis Scott 3-22-24 -->
  <!-- Adapted from https://javascript30.com/ JavaScript Drum Kit -->
  <!-- Converted drum kit to a keyboard lottery game with only one letter of 'Lotteryyy' having a boom sound.  Used Math random operator to randomize the key array in order to select the 'lotto' key.  
  Once lotto key is selected then the data key attribute from the lotto key is passed to the audio element using 
  the setAttribute method.  The lottery key is scrambled after each turn. -->
  <!--CSS styles changed scale to 3.0-->
</head>
<body>


  <div class="keys">
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="79" class="key">
      <kbd>O</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="84" class="key">
      <kbd>T</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="84" class="key">
      <kbd>T</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="69" class="key">
      <kbd>E</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="82" class="key">
      <kbd>R</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="89" class="key">
      <kbd>Y</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="89" class="key">
      <kbd>Y</kbd>
      <span class="sound"></span>
    </div>
    <div data-key="89" class="key">
      <kbd>Y</kbd>
      <span class="sound"></span>
    </div>
  </div>

  <!--
  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
-->

  <audio data-key="79" src="sounds/boom.wav"></audio>

<script>

const keys = Array.from(document.querySelectorAll('.key'));




    function removeTransition(e) {
    if (e.propertyName !== 'transform') return;
    e.target.classList.remove('playing');
  }

  function playSound(e) {
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
    if (!audio) return;

    key.classList.add('playing');
    audio.currentTime = 0;
    audio.play();
    const lottoKey = keys[(Math.floor(Math.random() * keys.length))];
    console.log(lottoKey)
    audio.setAttribute("data-key", lottoKey.getAttribute("data-key")) 
  }

  

  

  keys.forEach(key => key.addEventListener('transitionend', removeTransition));
  window.addEventListener('keydown', playSound);

</script>


</body>
</html>